<turbo-frame id="frame-usuarios">
    <div class="row justify-content-center">
        <div class="col-md-12">
            <div class="card shadow-sm border-0 rounded-4">
                <div class="card-body">
                    <h5 class="card-title mb-3">Listado de usuarios</h5>
                    <div class="table-responsive" style="overflow-x:auto; max-height: 50vh; overflow-y:auto;">
                        <table class="table  table-hover align-middle mb-0 table-sm">
                            <thead class="table-dark" style="position: sticky; top: 0; z-index: 2;">
                                <tr>
                                    <th style="background: #212529;">Nombre</th>
                                    <th style="background: #212529;">Usuario</th>
                                    <th style="background: #212529;">Tipo</th>
                                    <th style="background: #212529;">Celular</th>
                                    <th style="background: #212529;">Turno</th>
                                    <th style="background: #212529;">Cambio clave</th>
                                    <th style="background: #212529;">Ultimo accesso</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for usuario in arrayUsers %}
                                    <tr>
                                        <td>{{ usuario.name }}</td>
                                        <td>{{ usuario.userName }}</td>
                                        <td>{{ usuario.tipo }}</td>
                                        <td>{{ usuario.celular }}</td>
                                        <td>
                                            <div class="form-check form-switch d-flex justify-content-center align-items-center m-0" style="height:100%;">
                                                <input class="form-check-input" type="checkbox" id="flexSwitchCheckChecked" {% if usuario.isTurno %} checked {% endif  %} data-action="change->sistema--app#cambiarTurnoUser" data-id={{ usuario.id }}>
                                            </div>
                                        </td>
                                        <td>{{ usuario.cambioClave }}</td>
                                        <td>{{ usuario.fechaUltimoAccesso }}</td>
                                    </tr>
                                {% endfor %}                        
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="mt-3 d-flex justify-content-space-between" style="margin:20px">
                    <button type="button" class="btn btn-primary" style="margin-right:10px" data-action="sistema--app#abrirModalNuevoUsuario" data-accion = '1' data-id = '0'>Nuevo</button>
                    <a href="{{ path('app_inicio') }}" class="btn btn-danger">Regresar</a>
                </div>
            </div>
        </div>
    </div>

  <!-- Modal para registrar usuarios -->
  <div class="modal fade" id="modalNuevoUsuario" data-sistema--app-target="modalNuevoUsuario" tabindex="-1" aria-labelledby="modalNuevoUsuarioLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Nuevo usuario</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        {{ form_start(registrationForm,{ 'attr': {'data-sistema--app-target': 'formRegistroUsuario'} }) }}
            <div class="modal-body">
                <div class="row mb-3">
                    <div class="col-6">
                        {{ form_label(registrationForm.name) }}
                        {{ form_widget(registrationForm.name, {'attr': {'class': 'form-control'}}) }}
                        {{ form_errors(registrationForm.name) }}
                    </div>
                    <div class="col-6">
                        {{ form_label(registrationForm.roles) }}
                        {{ form_widget(registrationForm.roles, {'attr': {'class': 'form-select'}}) }}
                        {{ form_errors(registrationForm.roles) }}
                    </div>
                </div>
                 <div class="row mb-3">
                    <div class="col-6">
                        {{ form_label(registrationForm.tipo) }}
                        {{ form_widget(registrationForm.tipo, {'attr': {'class': 'form-select'}}) }}
                        {{ form_errors(registrationForm.tipo) }}
                    </div>
                    <div class="col-6">
                        {{ form_label(registrationForm.celular) }}
                        {{ form_widget(registrationForm.celular, {'attr': {'class': 'form-control'}}) }}
                        {{ form_errors(registrationForm.celular) }}
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-6">
                        {{ form_label(registrationForm.username) }}
                        {{ form_widget(registrationForm.username, {'attr': {'class': 'form-control'}}) }}
                        {{ form_errors(registrationForm.username) }}
                    </div>
                    <div class="col-6">
                        {{ form_label(registrationForm.plainPassword) }}
                        {{ form_widget(registrationForm.plainPassword, {'attr': {'class': 'form-control'}}) }}
                        {{ form_errors(registrationForm.plainPassword) }}
                    </div>
                </div>
                <button type="button" class="btn btn-primary" data-action="sistema--app#registrarUsuario">Registrar</button>
            </div>
        {{ form_end(registrationForm) }}
      </div>
    </div>
  </div>
</turbo-frame>