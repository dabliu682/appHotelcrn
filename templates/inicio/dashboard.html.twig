<turbo-frame id="frame-Dashboard">
    <div class="row">
        <div class="col-3">
            <div class="col-sm-12 mb-3 d-flex justify-content-center">
                <div class="card text-white bg-info shadow border-0 rounded-4 w-100" style="height: 100px;">
                    <div class="card-body d-flex align-items-center">
                        
                            {% if turno is not null %}
                                <div class="me-3 d-flex align-items-center justify-content-center" style="height: 60px; width: 60px; background: rgba(255,255,255,0.12); border-radius: 50%;">
                                <i class="fas fa-user-clock fa-2x"></i>
                            {% else %}
                                <div class="me-3 d-flex align-items-center justify-content-center" title="Abrir turno" data-action="click->sistema--app#abrirTurno" style="height: 60px; width: 60px; background: #ffc7c7; border-radius: 50%; cursor:pointer">
                                <i class="fas fa-user-clock fa-2x text-danger"></i>
                            {% endif %}
                        </div>
                        <div class="flex-grow-1">
                            <div class="h6 fw-bold mb-1">{{ turno is not null ? turno.usuario.name : 'Sin turno' }}</div>
                            <div class="card-title mb-1 fs-6">Turno actual</div>                            
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-sm-12 mb-3 d-flex justify-content-center">
                <div class="card text-white bg-primary shadow border-0 rounded-4 w-100" style="height: 100px;">
                    <div class="card-body d-flex align-items-center">
                        <div class="me-3 d-flex align-items-center justify-content-center" style="height: 60px; width: 60px; background: rgba(255,255,255,0.12); border-radius: 50%;">
                            <i class="fas fa-users fa-2x"></i>
                        </div>
                        <div class="flex-grow-1">
                            <div class="h2 fw-bold mb-1">{{ clientes is defined ? clientes : '0' }}</div>
                            <div class="card-title mb-1 fs-6">Clientes</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 mb-3 d-flex justify-content-center">
                <div class="card text-white bg-success shadow border-0 rounded-4 w-100" style="height: 100px;">
                    <div class="card-body d-flex align-items-center">
                        <div class="me-3 d-flex align-items-center justify-content-center" style="height: 60px; width: 60px; background: rgba(255,255,255,0.12); border-radius: 50%;">
                            <i class="fas fa-bed fa-2x"></i>
                        </div>
                        <div class="flex-grow-1">
                            <div class="h2 fw-bold mb-1">{{habDis}}/{{habTot}}</div>
                            <div class="card-title mb-1 fs-6">Habitaciones disponibles</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-12 mb-3 d-flex justify-content-center">
                <div class="card text-white bg-warning shadow border-0 rounded-4 w-100" style="height: 100px;">
                    <div class="card-body d-flex align-items-center">
                        <div class="me-3 d-flex align-items-center justify-content-center" style="height: 60px; width: 60px; background: rgba(255,255,255,0.18); border-radius: 50%;">
                            <i class="fas fa-percentage fa-2x"></i>
                        </div>
                        <div class="flex-grow-1">
                            <div class="h2 fw-bold mb-1">
                                {{ porcentaje ~ '%'}}
                            </div>
                            <div class="card-title mb-1 fs-6">Ocupación</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-9">                    
            <h5 class="card-title mb-3">Reservas recientes</h5>
            <div class="table-responsive" style="max-height: 320px; overflow-y: auto; border-right: 4px solid #1a237e;">
                <table class="table table-striped table-hover align-middle mb-0" style="min-width: 600px;">
                    <thead class="table-dark" style="position: sticky; top: 0; z-index: 2;">
                        <tr>
                            <th style="background: #212529;">#</th>
                            <th style="background: #212529;">Cliente</th>
                            <th style="background: #212529;">Celular</th>
                            <th style="background: #212529;">Fecha/Hora llegada</th>
                            <th style="background: #212529;">Empresa</th>
                            <th style="background: #212529;">Habitación</th>
                            <th style="background: #212529;">Observaciones</th>
                            <th style="background: #212529;">Estado</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for i in 1..100 %}
                            <tr>
                                <td>{{ i }}</td>
                                <td>Cliente {{ i }}</td>
                                <td>Hab {{ (i % 20) + 1 }}</td>
                                <td>{{ "2025-07-01"|date_modify("+" ~ (i-1) ~ " days")|date('d/m/Y') }}</td>
                                <td>{{ "2025-07-02"|date_modify("+" ~ (i-1) ~ " days")|date('d/m/Y') }}</td>
                                <td>{% if i % 3 == 0 %}Cancelada{% elseif i % 2 == 0 %}Activa{% else %}Finalizada{% endif %}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <style>
                @media (max-width: 991.98px) {
                    .table-responsive { max-height: 260px !important; }
                    .table { font-size: 0.95rem; }
                }
                @media (max-width: 767.98px) {
                    .table-responsive { max-height: 200px !important; }
                    .table { font-size: 0.9rem; }
                }
                @media (max-width: 575.98px) {
                    .table-responsive { max-height: 150px !important; }
                    .table { font-size: 0.85rem; }
                }
            </style>
        </div>
    </div>
</turbo-frame>